{"ast":null,"code":"var _jsxFileName = \"/Users/stanmattingly/Desktop/react-dev/tweet2shirt/client/src/components/Product.js\";\n\n/* global Stripe */\nimport React from 'react';\nimport './Product.css';\nimport { Elements } from '@stripe/react-stripe-js';\nimport { loadStripe } from '@stripe/stripe-js';\nconst stripePromise = loadStripe(process.env.REACT_APP_STRIPE_PUB_KEY);\nconst serverUrl = process.env.REACT_APP_SERVER_API_URL;\nexport class Product extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: null,\n      isLoaded: false,\n      priceData: {},\n      size: \"\",\n      errorMsg: \"\"\n    };\n    this.componentDidMount = this.componentDidMount.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  componentDidMount() {\n    console.log(serverUrl);\n    console.log(process.env.REACT_APP_STRIPE_PUB_KEY);\n    let id = this.props.match.params.id;\n    fetch(`${serverUrl}/price`, {\n      method: 'POST',\n      mode: 'cors',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        id: id\n      })\n    }).then(response => response.json()).then(jsonData => this.setState({\n      priceData: jsonData\n    }));\n  }\n\n  async handleClick(event) {\n    if (this.state.size) {\n      const stripe = await stripePromise;\n      let data = this.state.priceData;\n      data.size = this.state.size;\n      const response = await fetch('http://localhost:4242/create-checkout-session', {\n        method: 'POST',\n        mode: 'cors',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(data)\n      });\n      const session = await response.json();\n      const result = await stripe.redirectToCheckout({\n        sessionId: session.id\n      });\n    } else {\n      this.setState({\n        errorMsg: \"Please select a size first.\"\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Product\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: this.state.priceData.product ? this.state.priceData.product.images[0] : \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }\n    }, this.state.priceData.product ? this.state.priceData.product.name : \"\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }\n    }, this.state.errorMsg), /*#__PURE__*/React.createElement(\"select\", {\n      name: \"size\",\n      id: \"size\",\n      value: this.state.size,\n      onChange: e => this.setState({\n        size: e.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\",\n      hidden: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 21\n      }\n    }, \"Pick a Size\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"4011\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 21\n      }\n    }, \"Small\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"4012\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 21\n      }\n    }, \"Medium\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"4013\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 21\n      }\n    }, \"Large\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"4014\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 21\n      }\n    }, \"Extra Large\")), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.handleClick,\n      size: this.state.size,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }\n    }, \"Buy Now\"));\n  }\n\n}","map":{"version":3,"sources":["/Users/stanmattingly/Desktop/react-dev/tweet2shirt/client/src/components/Product.js"],"names":["React","Elements","loadStripe","stripePromise","process","env","REACT_APP_STRIPE_PUB_KEY","serverUrl","REACT_APP_SERVER_API_URL","Product","Component","constructor","props","state","error","isLoaded","priceData","size","errorMsg","componentDidMount","bind","handleClick","console","log","id","match","params","fetch","method","mode","headers","body","JSON","stringify","then","response","json","jsonData","setState","event","stripe","data","session","result","redirectToCheckout","sessionId","render","product","images","name","e","target","value"],"mappings":"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","sourcesContent":["/* global Stripe */\nimport React from 'react';\nimport './Product.css';\nimport {Elements} from '@stripe/react-stripe-js';\nimport {loadStripe} from '@stripe/stripe-js';\n\nconst stripePromise = loadStripe(process.env.REACT_APP_STRIPE_PUB_KEY);\nconst serverUrl = process.env.REACT_APP_SERVER_API_URL;\n\nexport class Product extends React.Component{\n    constructor(props) {\n        super(props);\n        this.state = {\n            error: null,\n            isLoaded: false,\n            priceData: {},\n            size: \"\",\n            errorMsg:\"\"\n        };\n        this.componentDidMount = this.componentDidMount.bind(this);\n        this.handleClick = this.handleClick.bind(this);\n    }\n    componentDidMount(){\n        console.log(serverUrl);\n        console.log(process.env.REACT_APP_STRIPE_PUB_KEY);\n        let id = this.props.match.params.id;\n        fetch(`${serverUrl}/price`, {\n            method: 'POST',\n            mode: 'cors',\n            headers: {\n                'Content-Type':'application/json'\n            },\n            body: JSON.stringify({id:id})\n        })\n        .then((response) => response.json())\n        .then((jsonData) => this.setState({priceData:jsonData}));\n    }\n    async handleClick(event){\n        if(this.state.size){\n            const stripe = await stripePromise;\n            let data = this.state.priceData;\n            data.size = this.state.size;\n            const response = await fetch('http://localhost:4242/create-checkout-session',{\n                method:'POST',\n                mode: 'cors',\n                headers: {\n                    'Content-Type':'application/json'\n                },\n                body: JSON.stringify(data)\n            });\n\n            const session = await response.json();\n\n            const result = await stripe.redirectToCheckout({\n                sessionId: session.id,\n            });\n        }\n        else{\n            this.setState({errorMsg:\"Please select a size first.\"})\n        }\n    }\n    render(){\n        return(\n            <div className=\"Product\">\n                <img src={this.state.priceData.product ? this.state.priceData.product.images[0]:\"\"}/>\n                <h1>{this.state.priceData.product ? this.state.priceData.product.name:\"\"}</h1>\n                <p className=\"error\">{this.state.errorMsg}</p>\n                <select name=\"size\" id=\"size\" value={this.state.size} onChange={\n                    (e) => this.setState({size:e.target.value})}>\n                    <option value=\"\" hidden>Pick a Size</option>\n                    <option value=\"4011\">Small</option>\n                    <option value=\"4012\">Medium</option>\n                    <option value=\"4013\">Large</option>\n                    <option value=\"4014\">Extra Large</option>\n                </select>\n                <button onClick={this.handleClick} size={this.state.size}>Buy Now</button>\n            </div>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}