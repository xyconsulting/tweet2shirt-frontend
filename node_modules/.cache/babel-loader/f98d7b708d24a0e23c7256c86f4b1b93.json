{"ast":null,"code":"var _jsxFileName = \"/Users/stanmattingly/Desktop/react-dev/tweet2shirt/client/src/components/Product.js\";\n\n/* global Stripe */\nimport React from 'react';\nimport './Product.css';\n\nvar firebase = require(\"firebase/app\");\n\nrequire('firebase/firestore');\n\nfirebase.initializeApp(require('../db.json'));\nconst db = firebase.firestore();\nconst stripe = Stripe('pk_test_H9E39lVcxUPU9ZJQJYad0dDi00YPeF5LjX');\nexport class Product extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: null,\n      isLoaded: false,\n      product: {}\n    };\n    this.componentDidMount = this.componentDidMount.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  componentDidMount() {\n    let id = this.props.match.params.id;\n    db.collection('products').where(\"id\", \"==\", id).get().then(response => response.docs[0].data()).then(data => this.setState({\n      product: data\n    }));\n  }\n\n  handleClick(e) {\n    e.preventDefault();\n    fetch('http://localhost:4242/create-checkout-session', {\n      method: 'POST',\n      mode: 'cors',\n      // no-cors, *cors, same-origin\n      cache: 'no-cache',\n      // *default, no-cache, reload, force-cache, only-if-cached\n      credentials: 'same-origin',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(this.state.product)\n    }).then(function (response) {\n      return response.json();\n    }).then(function (session) {\n      return stripe.redirectToCheckout({\n        sessionId: session.id\n      });\n    }).then(function (result) {\n      if (result.error) {\n        alert(result.error.message);\n      }\n    }).catch(function (error) {\n      console.log('Error:', error);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Product\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: this.state.product.mockup,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }\n    }, this.state.product.name), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.handleClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }\n    }, \"Checkout\"));\n  }\n\n}","map":{"version":3,"sources":["/Users/stanmattingly/Desktop/react-dev/tweet2shirt/client/src/components/Product.js"],"names":["React","firebase","require","initializeApp","db","firestore","stripe","Stripe","Product","Component","constructor","props","state","error","isLoaded","product","componentDidMount","bind","handleClick","id","match","params","collection","where","get","then","response","docs","data","setState","e","preventDefault","fetch","method","mode","cache","credentials","headers","body","JSON","stringify","json","session","redirectToCheckout","sessionId","result","alert","message","catch","console","log","render","mockup","name"],"mappings":";;AAAA;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,eAAP;;AAEA,IAAIC,QAAQ,GAAGC,OAAO,CAAC,cAAD,CAAtB;;AACAA,OAAO,CAAC,oBAAD,CAAP;;AACAD,QAAQ,CAACE,aAAT,CAAuBD,OAAO,CAAC,YAAD,CAA9B;AACA,MAAME,EAAE,GAAGH,QAAQ,CAACI,SAAT,EAAX;AACA,MAAMC,MAAM,GAAGC,MAAM,CAAC,4CAAD,CAArB;AAEA,OAAO,MAAMC,OAAN,SAAsBR,KAAK,CAACS,SAA5B,CAAqC;AACxCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACTC,MAAAA,KAAK,EAAE,IADE;AAETC,MAAAA,QAAQ,EAAE,KAFD;AAGTC,MAAAA,OAAO,EAAE;AAHA,KAAb;AAKA,SAAKC,iBAAL,GAAyB,KAAKA,iBAAL,CAAuBC,IAAvB,CAA4B,IAA5B,CAAzB;AACA,SAAKC,WAAL,GAAmB,KAAKA,WAAL,CAAiBD,IAAjB,CAAsB,IAAtB,CAAnB;AACH;;AACDD,EAAAA,iBAAiB,GAAE;AACf,QAAIG,EAAE,GAAG,KAAKR,KAAL,CAAWS,KAAX,CAAiBC,MAAjB,CAAwBF,EAAjC;AACAf,IAAAA,EAAE,CAACkB,UAAH,CAAc,UAAd,EAA0BC,KAA1B,CAAgC,IAAhC,EAAqC,IAArC,EAA0CJ,EAA1C,EAA8CK,GAA9C,GACKC,IADL,CACWC,QAAD,IAAcA,QAAQ,CAACC,IAAT,CAAc,CAAd,EAAiBC,IAAjB,EADxB,EAEKH,IAFL,CAEWG,IAAD,IAAU,KAAKC,QAAL,CAAc;AAACd,MAAAA,OAAO,EAACa;AAAT,KAAd,CAFpB;AAGH;;AACDV,EAAAA,WAAW,CAACY,CAAD,EAAG;AACVA,IAAAA,CAAC,CAACC,cAAF;AACAC,IAAAA,KAAK,CAAC,+CAAD,EAAkD;AACnDC,MAAAA,MAAM,EAAE,MAD2C;AAEnDC,MAAAA,IAAI,EAAE,MAF6C;AAErC;AACdC,MAAAA,KAAK,EAAE,UAH4C;AAGhC;AACnBC,MAAAA,WAAW,EAAE,aAJsC;AAKnDC,MAAAA,OAAO,EAAE;AACL,wBAAgB;AADX,OAL0C;AAQnDC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe,KAAK5B,KAAL,CAAWG,OAA1B;AAR6C,KAAlD,CAAL,CAUCU,IAVD,CAUM,UAASC,QAAT,EAAkB;AACpB,aAAOA,QAAQ,CAACe,IAAT,EAAP;AACH,KAZD,EAaChB,IAbD,CAaM,UAASiB,OAAT,EAAiB;AACnB,aAAOpC,MAAM,CAACqC,kBAAP,CAA0B;AAACC,QAAAA,SAAS,EAACF,OAAO,CAACvB;AAAnB,OAA1B,CAAP;AACH,KAfD,EAgBCM,IAhBD,CAgBM,UAASoB,MAAT,EAAgB;AAClB,UAAIA,MAAM,CAAChC,KAAX,EAAiB;AACbiC,QAAAA,KAAK,CAACD,MAAM,CAAChC,KAAP,CAAakC,OAAd,CAAL;AACH;AACJ,KApBD,EAqBCC,KArBD,CAqBO,UAASnC,KAAT,EAAe;AAClBoC,MAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAqBrC,KAArB;AACH,KAvBD;AAwBH;;AACDsC,EAAAA,MAAM,GAAE;AACJ,wBACI;AAAK,MAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,GAAG,EAAE,KAAKvC,KAAL,CAAWG,OAAX,CAAmBqC,MAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAK,KAAKxC,KAAL,CAAWG,OAAX,CAAmBsC,IAAxB,CAFJ,eAGI;AAAQ,MAAA,OAAO,EAAE,KAAKnC,WAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAHJ,CADJ;AAOH;;AApDuC","sourcesContent":["/* global Stripe */\nimport React from 'react';\nimport './Product.css';\n\nvar firebase = require(\"firebase/app\");\nrequire('firebase/firestore');\nfirebase.initializeApp(require('../db.json'));\nconst db = firebase.firestore();\nconst stripe = Stripe('pk_test_H9E39lVcxUPU9ZJQJYad0dDi00YPeF5LjX');\n\nexport class Product extends React.Component{\n    constructor(props) {\n        super(props);\n        this.state = {\n            error: null,\n            isLoaded: false,\n            product: {}\n        };\n        this.componentDidMount = this.componentDidMount.bind(this);\n        this.handleClick = this.handleClick.bind(this);\n    }\n    componentDidMount(){\n        let id = this.props.match.params.id;\n        db.collection('products').where(\"id\",\"==\",id).get()\n            .then((response) => response.docs[0].data())\n            .then((data) => this.setState({product:data}))\n    }\n    handleClick(e){\n        e.preventDefault();\n        fetch('http://localhost:4242/create-checkout-session', {\n            method: 'POST',\n            mode: 'cors', // no-cors, *cors, same-origin\n            cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n            credentials: 'same-origin',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(this.state.product)\n        })\n        .then(function(response){\n            return response.json();\n        })\n        .then(function(session){\n            return stripe.redirectToCheckout({sessionId:session.id})\n        })\n        .then(function(result){\n            if (result.error){\n                alert(result.error.message);\n            }\n        })\n        .catch(function(error){\n            console.log('Error:',error);\n        });\n    }\n    render(){\n        return(\n            <div className=\"Product\">\n                <img src={this.state.product.mockup}/>\n                <h1>{this.state.product.name}</h1>\n                <button onClick={this.handleClick}>Checkout</button>\n            </div>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}